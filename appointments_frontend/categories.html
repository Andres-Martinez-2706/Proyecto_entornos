<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CategorÃ­as - Citas App</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body class="app-page">
    <!-- Header -->
    <header class="app-header">
        <div class="header-left">
            <button id="sidebarToggle" class="sidebar-toggle" aria-label="MenÃº">
                <span class="hamburger"></span>
            </button>
            <div class="logo">
                <h1>ğŸ“… Citas App</h1>
            </div>
        </div>
        <div class="header-right">
            <span id="userName" class="user-name"></span>
            <button id="logoutBtn" class="btn btn-outline-sm">Cerrar SesiÃ³n</button>
        </div>
    </header>

    <!-- Sidebar -->
    <aside id="sidebar" class="sidebar">
        <nav class="sidebar-nav">
            <a href="home.html" class="nav-item">
                <span class="nav-icon">ğŸ </span>
                <span class="nav-text">Inicio</span>
            </a>
            <a href="appointments.html" class="nav-item">
                <span class="nav-icon">ğŸ“…</span>
                <span class="nav-text">Citas</span>
            </a>
            <a href="notifications.html" class="nav-item">
                <span class="nav-icon">ğŸ””</span>
                <span class="nav-text">Notificaciones</span>
                <span id="notificationBadge" class="badge"></span>
            </a>
            <a href="categories.html" class="nav-item active">
                <span class="nav-icon">ğŸ“</span>
                <span class="nav-text">CategorÃ­as</span>
            </a>
            <a href="profile.html" class="nav-item">
                <span class="nav-icon">ğŸ‘¤</span>
                <span class="nav-text">Perfil</span>
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Page Header -->
            <div class="page-header">
                <h2 class="page-title">GestiÃ³n de CategorÃ­as</h2>
                <button id="createCategoryBtn" class="btn btn-primary">
                    <span>â•</span> Nueva CategorÃ­a
                </button>
            </div>

            <!-- Info Card -->
            <div class="info-card">
                <p style="margin: 0;">
                    Las categorÃ­as permiten organizar las citas por tipo. 
                    Puedes crear, editar y eliminar categorÃ­as segÃºn las necesidades del sistema.
                    <strong>Nota:</strong> No se pueden eliminar categorÃ­as que estÃ¡n siendo usadas por citas activas.
                </p>
            </div>

            <!-- Loading State -->
            <div id="categoriesLoading" class="loading-state">
                <div class="spinner"></div>
                <p>Cargando categorÃ­as...</p>
            </div>

            <!-- Empty State -->
            <div id="categoriesEmpty" class="empty-state" style="display: none;">
                <div class="empty-icon">ğŸ“‚</div>
                <h4>No hay categorÃ­as</h4>
                <p>AÃºn no hay categorÃ­as registradas en el sistema</p>
                <button class="btn btn-primary" onclick="document.getElementById('createCategoryBtn').click()">
                    Crear primera categorÃ­a
                </button>
            </div>

            <!-- Categories Grid -->
            <div id="categoriesGrid" class="categories-grid" style="display: none;"></div>
        </div>
    </main>

    <!-- Modal Create/Edit Category -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" data-modal="categoryModal">&times;</span>
            <h2 id="categoryModalTitle" class="modal-title">Nueva CategorÃ­a</h2>
            <form id="categoryForm" class="form">
                <input type="hidden" id="categoryId">
                
                <div class="form-group">
                    <label for="categoryName">Nombre *</label>
                    <input type="text" id="categoryName" name="name" required 
                           placeholder="Ej: MÃ©dica, AcadÃ©mica, Trabajo" maxlength="100">
                </div>

                <div class="form-group">
                    <label for="categoryDescription">DescripciÃ³n</label>
                    <textarea id="categoryDescription" name="description" rows="3" 
                              placeholder="Breve descripciÃ³n de la categorÃ­a"></textarea>
                </div>

                <div id="categoryError" class="error-message"></div>
                
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" data-modal="categoryModal">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Delete Confirmation -->
    <div id="deleteCategoryModal" class="modal">
        <div class="modal-content modal-small">
            <span class="modal-close" data-modal="deleteCategoryModal">&times;</span>
            <h2 class="modal-title">Confirmar EliminaciÃ³n</h2>
            <input type="hidden" id="deleteCategoryId">
            <p id="deleteCategoryMessage" class="modal-text">Â¿EstÃ¡s seguro de eliminar esta categorÃ­a?</p>
            <p class="modal-text" style="color: var(--danger); font-weight: 600;">
                âš ï¸ Esta acciÃ³n no se puede deshacer.
            </p>
            <div id="deleteCategoryError" class="error-message"></div>
            <div class="form-actions">
                <button type="button" class="btn btn-outline" data-modal="deleteCategoryModal">Cancelar</button>
                <button id="confirmDeleteCategoryBtn" class="btn btn-danger">Eliminar</button>
            </div>
        </div>
    </div>

    <!-- Modal View Details -->
    <div id="categoryDetailsModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" data-modal="categoryDetailsModal">&times;</span>
            <h2 class="modal-title">Detalles de la CategorÃ­a</h2>
            <div id="categoryDetailsContent" class="details-content"></div>
            <div class="form-actions">
                <button type="button" class="btn btn-primary" data-modal="categoryDetailsModal">Cerrar</button>
            </div>
        </div>
    </div>

    <!-- Overlay -->
    <div id="sidebarOverlay" class="sidebar-overlay"></div>

    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/categories.js"></script>
</body>
</html>